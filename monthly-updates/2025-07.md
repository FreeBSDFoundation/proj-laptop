# FreeBSD Foundation Laptop Update - July 2025

## Completed in July

#### usbhid(4) enabled by default in CURRENT

usbhid is has been enabled by default in CURRENT, allowing the use of a much wider range of devices than supported by previous drivers. usbhib will be used in preference to other drivers to support input devices such as mice, keyboards and trackpads.

GitHub issue: [#76](https://github.com/FreeBSDFoundation/proj-laptop/issues/76)
 
#### Modern standby

Three AMD SMU changes landed, an important step towards enabling S0iX support.

As part of this work the dependent [ACPICA change was merged upstream](https://github.com/acpica/acpica/pull/993). This will be cherry-picked back into FreeBSD once the next ACPI release has been made.

GitHub issue: [#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

#### Improvements to LinuxKPI ACPI support

We have improved LinuxKPI's ACPI support to allow wireless drivers to compile without modification. This is a necessary step for enabling Wi-Fi 6 and future features.

GitHub issue: [#34](https://github.com/FreeBSDFoundation/proj-laptop/issues/34)


## Progress updates

### Power Management

#### Modern standby

S0i3 support is working reliably in our development branch on our reference hardware. Wider support on AMD systems require GPIO interrupt changes: [D51588](https://reviews.freebsd.org/D51588), [D51589](https://reviews.freebsd.org/D51589)

We are preparing a test image to assist in identifying and debugging firmware interface issues.  This image will allow users to experiment with modern standby features while development continues outside the main FreeBSD tree.

GitHub issue: [#32](https://github.com/FreeBSDFoundation/proj-laptop/issues/32)

#### USB Debugging Tool

Kernel debugging using the xhci debug standard is working as a proof of concept, currently two bugs in the loader implementation stop it functioning as a loader console.

The host side of [xhci debug support has been extracted and is in review](https://reviews.freebsd.org/D51299)

GitHub issue: [#38](https://github.com/FreeBSDFoundation/proj-laptop/issues/38)

FreeBSD supports an additional method for kernel debugging using USB serial devices.  An update is in progress to make this function out of the box in FreeBSD, and we are documenting the process to use this on all versions of FreeBSD.  Effort went into analysing locking issues for using USB serial as a console, but it isn't clear if this can be unlocked sufficiently to use with witness enabled.

GitHub issue: [#73](https://github.com/FreeBSDFoundation/proj-laptop/issues/73)

#### High Performance from Laptops with Heterogeneous Cores

We are in the early stages of designing scheduler changes to support hybrid systems with a mix of performance and efficiency cores.  This work involves collaboration with other FreeBSD committers who have experience with similar hardware.

As part of this effort, a [wiki page](https://wiki.freebsd.org/Scheduler/Hybrid) has been created to outline relevant technologies, challenges, and early design ideas.

GitHub issue: [#22](https://github.com/FreeBSDFoundation/proj-laptop/issues/22)

### WiFi

#### Wi-Fi 6 (802.11ax) Support Progress

Work continued to prepare FreeBSDâ€™s wireless stack for Wi-Fi 6 (802.11ax). Internal structures and definitions for 802.11ax have been updated with correct values and moved from LinuxKPI into `net80211`, making them more widely available.  Some of these updates are now visible in `ifconfig`, which will aid debugging as initial Wi-Fi 6 support is brought up.

GitHub issue: [#34](https://github.com/FreeBSDFoundation/proj-laptop/issues/34)


#### Suspend and Resume for LinuxKPI-based Wi-Fi

PCI-related changes to enable suspend/resume with LinuxKPI-based Wi-Fi drivers are now functional. However, graphics output on resume is still not functioning. Debugging around this issue is ongoing.

GitHub issue: [#58](https://github.com/FreeBSDFoundation/proj-laptop/issues/58)

### Compatibility and System Requirements

#### KDE Desktop Installer Option

For FreeBSD 15.0, our goal is to extend the FreeBSD installer to offer a minimal KDE-based desktop as an install option.  A community project provides an initial concept, a low-interaction installation process that, upon completion, brings the user directly to a KDE graphical login screen.

[An in progress branch is available](https://gitlab.com/alfix/kde-installer-dialogs.)

We are currently evaluating the required `pkg` dependencies to automatically select appropriate graphics drivers.

GitHub issue: [#25](https://github.com/FreeBSDFoundation/proj-laptop/issues/25)

#### USBHID Peripherals Support

USBHID has been enabled by default in CURRENT, wider testing revealed an issue breaking 2nd factor hardware tokens such as the NitroKey or YubiKey. We are working with the community to resolve this issue in review [D41639](https://reviews.freebsd.org/D41639) and in the FreeBSD forums.

GitHub issue: [#75](https://github.com/FreeBSDFoundation/proj-laptop/issues/75)

#### Support for Non-Standard Audio Jacks, and Automatic Audio Switching

Work continues on improvements to audio device handling, especially those with non-standard pin arrangements on the audio jacks. 

We have an open review to enable audio routing between sound devices in a system. This should enable automatically changing sound output across multiple PCM devices. You can help by testing the change: https://reviews.freebsd.org/D50070 

GitHub issue: [#17](https://github.com/FreeBSDFoundation/proj-laptop/issues/17)

#### Specialty Keys

We have been investigating support for specialty keys under KDE.  On test devices, most keys work out of the box.  Volume, brightness, and media keys are automatically detected and configured by the desktop environment, with reconfiguration options available through the settings menu.  However, on the systems we tested, some keys such as airplane mode are not detected by KDE.  We are now investigating how to handle these keys and will write documentation to help users enable those not automatically recognized.

GitHub issue: [#19](https://github.com/FreeBSDFoundation/proj-laptop/issues/19)

#### HDMI Support

We have started investigating how to improve external monitor support and selection through HDMI.  An initial survey was performed under KDE with Framework laptops and a range of external monitors.  The results were promising.

We also began investigating adding support for controlling external monitor settings using DDC, a monitor's native interface which exposes values and control for colour, brightness, and audio volume.

GitHub issue: [#27](https://github.com/FreeBSDFoundation/proj-laptop/issues/27) 

## Conclusion

We are eight months into the project, and the FreeBSD Foundation thanks everyone who has contributed.

Thanks go out to:
* Our developers
  * Alfonso Siciliano
  * Aymeric Wibo
  * Bjoern Zeeb
  * Christos Margiolis
  * Isaac Freund
  * Jean-Sebastien Pedron
  * Li-Wen Hsu
  * Mitchell Horne
  * Olivier Certner
  * Tom Jones
* The project team:
  * Deb Goodkin
  * Ed Maste
  * Joe Mingrone
  * Alice Sowerby
* The Laptop and Desktop Working Group
  * Chris Moerz
  * All attendees
* The FreeBSD Project
* Quantum Leap Research
* AMD, who have helped in troubleshooting sleep issues.
* Netflix, who have been testing our scheduler patchsets
* Dell, who have donated the UVC kernel driver.
* Future Crew, who provided the iwx WiFi driver source code.

Please refer to the [README](../README.md) for more information about the FreeBSD Foundation's Laptop Project.
